version: '3.2'

services:
  multilogin:
    image: 'golang:1.9.2'
    volumes:
      - 'data:/go'
      - '.:/go/src/github.com/Azunyan1111/multilogin'
    ports:
    # localPort:DockerPort
      - '8080:8080'
      - '443:443'
    environment:
      - 'PORT=8080'
      - 'SESSION_SECRET'
    command: bash -c "cd /go/src/github.com/Azunyan1111/multilogin &&
     go get ./... &&
     go run main.go"

  db:
    image: 'mysql'
    ports:
     - '3306:3306'
    environment:
        MYSQL_DATABASE: mysql
        MYSQL_ROOT_PASSWORD: password

volumes:
  data:
    driver: 'local'